{"version":3,"file":"calculator.js","sourceRoot":"","sources":["../../src/components/calculator.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, html, css} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport {TemplateResult} from 'lit-element';\nimport {ifDefined} from 'lit/directives/if-defined.js';\n\nimport {VtbElement} from '../models';\n\n@customElement('vtb-calculator-element')\nexport class VtbCalculatorPriceElement extends LitElement {\n  static override styles = css`\n    .price-calculator-element:after {\n      content: '';\n      display: block;\n      clear: both;\n    }\n\n    .price-calculator-element > div {\n      float: left;\n    }\n\n    .description {\n      width: 70%;\n    }\n\n    .price {\n      width: 30%;\n      text-align: right;\n    }\n\n    h3 {\n      display: block;\n    }\n  `;\n\n  @property({type: String})\n  locale = 'nl-NL';\n\n  @property({type: String})\n  currency = 'EUR';\n\n  @property({type: Number})\n  price = 0;\n\n  @property({type: String, attribute: 'price-type'})\n  priceType = 'pp';\n\n  @property({\n    type: String,\n    attribute: 'display-price',\n    converter: (value, _type) => {\n      if (typeof value == 'string' && value == 'true') {\n        return true;\n      }\n\n      if (typeof value == 'string' && value == 'false') {\n        return false;\n      }\n\n      if (typeof value == 'boolean') {\n        return value;\n      }\n\n      if (value) {\n        return value.toString();\n      }\n\n      return false;\n    },\n  })\n  displayPrice: boolean | string = false;\n\n  @property({\n    type: Boolean,\n    attribute: 'display-zero',\n    converter: (value, _type) => {\n      if (typeof value == 'string' && value == 'true') {\n        return true;\n      }\n\n      if (typeof value == 'string' && value == 'false') {\n        return false;\n      }\n\n      if (typeof value == 'boolean') {\n        return value;\n      }\n\n      if (value) {\n        return true;\n      }\n\n      return false;\n    },\n  })\n  displayPricesIfZero = false;\n\n  override render() {\n    const priceRenderer = new Intl.NumberFormat(this.locale, {\n      style: 'currency',\n      currency: this.currency,\n    });\n\n    let priceDisplay = '';\n    if (this.displayPrice && typeof this.displayPrice == 'boolean') {\n      priceDisplay = priceRenderer.format(this.price) as string;\n    }\n\n    if (!this.displayPrice && typeof this.displayPrice == 'boolean') {\n      priceDisplay = '';\n    }\n\n    if (this.displayPrice && typeof this.displayPrice == 'string') {\n      priceDisplay = this.displayPrice;\n    }\n\n    if (\n      this.displayPrice &&\n      typeof this.displayPrice == 'boolean' &&\n      this.price == 0 &&\n      !this.displayPricesIfZero\n    ) {\n      priceDisplay = '';\n    }\n\n    return html`\n      <div class=\"price-calculator-element\">\n        <div class=\"description\">\n          <slot></slot>\n        </div>\n        <div class=\"price\">${priceDisplay} &nbsp;</div>\n      </div>\n    `;\n  }\n}\n\n@customElement('vtb-calculator-list')\nexport class VtbCalculatorPriceListElement extends LitElement {\n  static override styles = css`\n    :host {\n      display: block;\n    }\n  `;\n\n  @property({type: Boolean, attribute: 'calculate-totals'})\n  calculateTotals = false;\n\n  @property({type: Boolean, attribute: 'display-totals'})\n  displayTotals = false;\n\n  @property({type: Boolean, attribute: false})\n  displayPrices = false;\n\n  @property({type: Boolean, attribute: 'display-zero'})\n  displayPricesIfZero = false;\n\n  @property({type: String})\n  locale = 'nl-NL';\n\n  @property({type: String})\n  currency = 'EUR';\n\n  @property({type: Number, attribute: 'total-price'})\n  totalPrice = 0;\n\n  override render() {\n    return html`\n      <div class=\"price-calculator-element-list\">\n        <h3>${this.title}</h3>\n        <div class=\"\">\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n}\n\n@customElement('vtb-calculator')\nexport class VtbCalculatorElement extends LitElement {\n  static override styles = css`\n    :host {\n      display: block;\n    }\n\n    .price-calculator-totals {\n      font-weight: bold;\n      font-size: 110%;\n      border-top: 1px solid #444;\n      margin-top: 1rem;\n      padding-top: 1rem;\n    }\n  `;\n\n  @property({type: Boolean, attribute: 'calculate-totals'})\n  calculateTotals = false;\n\n  @property({type: Boolean, attribute: 'display-totals'})\n  displayTotals = false;\n\n  @property({type: String})\n  locale = 'nl-NL';\n\n  @property({type: String})\n  currency = 'EUR';\n\n  @property({type: Number, attribute: 'total-price'})\n  totalPrice = 0;\n\n  @property({type: String, attribute: false})\n  customStyles = '';\n\n  // @property({type: Object, attribute: false})\n  // priceData?: VtbCalculatorData;\n\n  @property({type: Array, attribute: false})\n  priceData?: Array<VtbElement>;\n\n  @property({type: Array, attribute: false})\n  groups = ['elements', 'surcharges', 'optionals'];\n\n  @property({type: Boolean, attribute: false})\n  showPerParticipant = false;\n\n  override render() {\n    let slotHTML: string | TemplateResult = '';\n\n    if (this.children.length == 0 && this.priceData) {\n      slotHTML = this._renderPriceData();\n    }\n\n    let customStyles;\n    if (this.customStyles) {\n      customStyles = html`\n                <style type=text/css>${this.customStyles}</style>\n            `;\n    }\n\n    return html`\n      ${customStyles}\n      <div class=\"price-calculator\">\n        <slot>${slotHTML}</slot>\n        ${this.renderTotals()}\n      </div>\n    `;\n  }\n\n  private renderTotals() {\n    if (this.displayTotals) {\n      return html`\n        <div class=\"price-calculator-totals\">\n          <vtb-calculator-element\n            price=${this.totalPrice}\n            currency=${this.currency}\n            locale=${this.locale}\n            display-price=\"true\"\n          >\n            Totaal\n          </vtb-calculator-element>\n        </div>\n      `;\n    }\n    return '';\n  }\n\n  public renderElementDescription(element: VtbElement) {\n    return `${element.nights + 1} dgn. - ${element.title}`;\n  }\n\n  public getElementPrice(element: VtbElement) {\n    return `${element.price}`;\n  }\n\n  private _renderPriceData() {\n    const priceData = this.priceData as Array<VtbElement>;\n    return html`\n      <vtb-calculator-list title=${ifDefined(this.title)}>\n        ${this._renderPriceList(priceData)}\n      </vtb-calculator-list>\n    `;\n  }\n\n  private _renderPriceList(priceList: Array<VtbElement>) {\n    const elementTemplates: Array<TemplateResult> = [];\n\n    for (const element of priceList) {\n      if (element && element.hidden) {\n        continue;\n      }\n\n      elementTemplates.push(html`\n        <vtb-calculator-element\n          price=${parseFloat(this.getElementPrice(element))}\n          currency=${this.currency}\n          price-type=\"\"\n          display-price=\"true\"\n        >\n          ${this.renderElementDescription(element)}\n        </vtb-calculator-element>\n      `);\n    }\n\n    return elementTemplates;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'vtb-calculator': VtbCalculatorElement;\n    'vtb-calculator-list': VtbCalculatorPriceListElement;\n    'vtb-calculator-element': VtbCalculatorPriceElement;\n  }\n}\n"]}