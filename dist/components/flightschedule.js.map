{"version":3,"file":"flightschedule.js","sourceRoot":"","sources":["../../src/components/flightschedule.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, css, html} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport {ifDefined} from 'lit/directives/if-defined.js';\nimport {TemplateResult} from 'lit-element';\n\nimport dayjs, {type Dayjs} from 'dayjs';\nimport 'dayjs/locale/nl';\ndayjs.locale('nl');\n\nimport * as _ from 'lodash';\nconst {isEqual} = _;\n\nimport {VtbFlightData} from '../models';\n\nexport interface VtbFlightScheduleOptions {\n  dateformat?: string;\n}\n\nclass VtbBaseFlightElement extends LitElement {\n  @property({type: String})\n  IATA?: string;\n\n  @property({type: String})\n  date?: string;\n\n  @property({type: String})\n  time?: string;\n\n  @property({type: String})\n  timezone = '02:00';\n\n  @property({type: String})\n  dateformat = 'DD MMM (hh:mm)';\n\n  @property({type: String})\n  country?: string;\n\n  @property({type: String})\n  city?: string;\n\n  type = 'departure';\n\n  static override styles = css`\n    :host {\n      width: 100%;\n    }\n\n    .row > div {\n      display: inline-block;\n    }\n\n    .date,\n    .time,\n    .description,\n    .carrier {\n      padding: 0 1rem;\n    }\n  `;\n\n  override render() {\n    const date = dayjs(this.date);\n\n    if (!this.dateformat || this.dateformat == '') {\n      return html`\n        <div class=\"row ${this.type}\">\n          <div class=\"date-time\"></div>\n          <div class=\"description\"><slot></slot></div>\n        </div>\n      `;\n    } else {\n      return html`\n        <div class=\"row ${this.type}\">\n          <div class=\"date-time\">${date.format(this.dateformat)}</div>\n          <div class=\"description\"><slot></slot></div>\n        </div>\n      `;\n    }\n  }\n}\n\n@customElement('vtb-flight-departure')\nexport class VtbFlightDepartureElement extends VtbBaseFlightElement {\n  override type = 'departure';\n}\n\n@customElement('vtb-flight-arrival')\nexport class VtbFlightArrivalElement extends VtbBaseFlightElement {\n  override type = 'arrival';\n}\n\n@customElement('vtb-flight-element')\nexport class VtbFlightElement extends LitElement {\n  @property({type: String})\n  flightnumber?: string;\n\n  @property({type: String})\n  carrier?: string;\n\n  @property({type: String})\n  carrier_code?: string;\n\n  @property({type: String})\n  duration?: string;\n\n  static override styles = css`\n    :host {\n      width: 100%;\n    }\n\n    .flight {\n      display: grid;\n      grid-template-columns: 3fr 3fr 1fr 1fr 1fr;\n      column-gap: 0.5rem;\n      row-gap: 0.5rem;\n    }\n  `;\n\n  override render() {\n    return html`\n      <div class=\"flight\">\n        <slot></slot>\n        ${this.render_carrier()} ${this.render_duration()}\n        ${this.render_flightnumber()}\n      </div>\n    `;\n  }\n\n  render_carrier() {\n    if (this.carrier) {\n      return html`<div class=\"carrier\">${this.carrier}</div>`;\n    }\n    return '';\n  }\n\n  render_duration() {\n    if (this.duration) {\n      return html`<div class=\"duration\">${this.duration}</div>`;\n    }\n    return '';\n  }\n\n  render_flightnumber() {\n    if (this.flightnumber) {\n      return html`<div class=\"flightnumber\">\n        ${this.carrier_code}${this.flightnumber}\n      </div>`;\n    }\n    return '';\n  }\n}\n\n@customElement('vtb-flightschedule')\nexport class VtbFlightScheduleElement extends LitElement {\n  @property({\n    type: Array,\n    attribute: false,\n    hasChanged(newVal: Array<VtbFlightData>, oldVal: Array<VtbFlightData>) {\n      return !isEqual(newVal, oldVal);\n    },\n  })\n  flightinfo: Array<VtbFlightData> = [];\n\n  @property({type: String})\n  dateformat = 'DD MMM (hh:mm)';\n\n  constructor() {\n    super();\n    this.flightinfo = [];\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n  }\n\n  override render() {\n    let _innerHTML: string | TemplateResult = '';\n    if (this.children.length == 0 && this.flightinfo) {\n      _innerHTML = this._renderFlightInfo();\n    }\n    return html`\n      <div class=\"flight-schedule\">\n        <slot>${_innerHTML}</slot>\n      </div>\n    `;\n  }\n\n  private _renderFlightInfo() {\n    const flightinfo = this.flightinfo as Array<VtbFlightData>;\n\n    const scheduleTemplates = [];\n    for (const _schedule of flightinfo) {\n      let departure_date: Dayjs | undefined | null = null;\n      let arrival_date: Dayjs | undefined | null = null;\n\n      if (\n        _schedule.departure?.date &&\n        typeof _schedule.departure?.date == 'string'\n      ) {\n        departure_date = dayjs(_schedule.departure?.date);\n      } else {\n        departure_date = _schedule.departure?.date;\n      }\n\n      if (\n        _schedule.arrival?.date &&\n        typeof _schedule.arrival?.date == 'string'\n      ) {\n        arrival_date = dayjs(_schedule.arrival?.date);\n      } else {\n        arrival_date = _schedule.arrival?.date;\n      }\n\n      scheduleTemplates.push(html`\n        <vtb-flight-element\n          carrier=${ifDefined(_schedule.carrier?.name)}\n          carrier_code=${ifDefined(_schedule.carrier?.code)}\n          duration=${ifDefined(_schedule.duration)}\n          flightnumber=${ifDefined(_schedule.flightnumber)}\n        >\n          <vtb-flight-departure\n            date=${ifDefined(departure_date?.format('YYYY-MM-DD HH:mm'))}\n            IATA=${ifDefined(_schedule.departure?.IATA)}\n            dateformat=${this.dateformat}\n            country=${ifDefined(_schedule.departure?.country)}\n            city=${ifDefined(_schedule.departure?.city)}\n            timezone=${ifDefined(_schedule.departure?.timezone)}\n          >\n            ${ifDefined(_schedule.departure?.description)}\n          </vtb-flight-departure>\n          <vtb-flight-arrival\n            date=${ifDefined(arrival_date?.format('YYYY-MM-DD HH:mm'))}\n            IATA=${ifDefined(_schedule.arrival?.IATA)}\n            dateformat=${this.dateformat}\n            country=${ifDefined(_schedule.arrival?.country)}\n            city=${ifDefined(_schedule.arrival?.city)}\n            timezone=${ifDefined(_schedule.arrival?.timezone)}\n          >\n            ${ifDefined(_schedule.arrival?.description)}\n          </vtb-flight-arrival>\n        </vtb-flight-element>\n      `);\n    }\n    return html`${scheduleTemplates}`;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'vtb-flightschedule': VtbFlightScheduleElement;\n    'vtb-flight-element': VtbFlightElement;\n    'vtb-flight-departure': VtbFlightDepartureElement;\n    'vtb-flight-arrival': VtbFlightArrivalElement;\n  }\n}\n"]}