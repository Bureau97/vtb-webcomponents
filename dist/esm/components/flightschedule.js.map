{"version":3,"file":"flightschedule.js","sourceRoot":"","sources":["../../../src/components/flightschedule.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, css, html} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\n// import {ifDefined} from 'lit/directives/if-defined.js';\nimport {TemplateResult} from 'lit-element';\nimport {unsafeHTML} from 'lit/directives/unsafe-html.js';\n\nimport dayjs, {type Dayjs} from 'dayjs';\nimport 'dayjs/locale/nl.js';\ndayjs.locale('nl');\n\nimport * as _ from 'lodash';\nconst {isEqual} = _;\n\nimport {VtbFlightData} from '../models.js';\n\nexport interface VtbFlightScheduleOptions {\n  dateformat?: string;\n}\n\n@customElement('vtb-flightschedule')\nexport class VtbFlightScheduleElement extends LitElement {\n  static override styles = css`\n    :host {\n      width: 100%;\n    }\n\n    .row {\n      display: flex;\n      flex-wrap: wrap;\n      margin-top: 0;\n      margin-right: 1.5rem;\n      margin-left: 1.5rem;\n    }\n\n    .row > * {\n      flex-shrink: 0;\n      width: 100%;\n      max-width: 100%;\n      padding-right: 1.5rem;\n      padding-left: 1.5rem;\n      margin-top: 0;\n    }\n\n    .col {\n      flex: 1 0 0%;\n    }\n\n    .d-none {\n      display: none;\n    }\n\n    .flights--flight,\n    .flights--header {\n      padding: 1.5rem 1rem;\n    }\n\n    div.flights--flight > div {\n      display: flex;\n      flex-flow: row wrap;\n      align-items: flex-start;\n    }\n\n    div.flights--flight .flightdata--key {\n      font-weight: bold;\n    }\n\n    div.flights--flight .flightdata--value {\n      flex-grow: 2;\n    }\n\n    div.flights--flight > div > span {\n      display: block;\n      flex: 1;\n    }\n\n    .flights--flight:nth-child(even) {\n      background-color: var(--vtb-flightschedule--background, #0000001a);\n    }\n\n    .operatedby {\n      font-size: 90%;\n    }\n\n    @media (min-width: 992px) {\n      .col-lg {\n        flex: 1 0 0%;\n      }\n\n      div.flights--flight > div > span.flightdata--key {\n        display: none;\n      }\n\n      .d-lg-flex {\n        display: flex;\n      }\n    }\n  `;\n\n  @property({\n    type: Array,\n    attribute: false,\n    hasChanged(newVal: Array<VtbFlightData>, oldVal: Array<VtbFlightData>) {\n      return !isEqual(newVal, oldVal);\n    }\n  })\n  flightinfo: Array<VtbFlightData> = [];\n\n  @property({type: String})\n  dateformat = 'DD MMM (hh:mm)';\n\n  constructor() {\n    super();\n    this.flightinfo = [];\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n  }\n\n  override render() {\n    let _innerHTML: string | TemplateResult = '';\n    if (this.children.length == 0 && this.flightinfo) {\n      _innerHTML = this._renderFlightInfo();\n    }\n    return html`\n      <div class=\"flight-schedule\">\n        <slot>${_innerHTML}</slot>\n      </div>\n    `;\n  }\n\n  render_airport(airport: string | undefined, IATA: string | undefined) {\n    if (airport && IATA) {\n      return html`<strong>${airport}</strong> (${IATA})`;\n    }\n    if (airport && !IATA) {\n      return html`<strong>${airport}</strong>`;\n    }\n\n    return '';\n  }\n\n  render_carrier(carrier: string | undefined) {\n    if (carrier) {\n      return html`${carrier}`;\n    }\n    return '';\n  }\n\n  render_duration(duration: string | undefined) {\n    if (duration) {\n      return html`${duration}`;\n    }\n    return '';\n  }\n\n  render_flightnumber(\n    flightnumber: string | undefined,\n    carrier_code: string | undefined\n  ) {\n    if (flightnumber) {\n      return html`${carrier_code}${flightnumber}`;\n    }\n    return '';\n  }\n\n  render_operatedby(operated_by: string | undefined) {\n    if (operated_by) {\n      return html`<span class=\"operatedby\"\n        >Uitgevoerd door ${operated_by}</span\n      >`;\n    }\n    return '';\n  }\n\n  private _renderFlightInfo() {\n    const flightinfo = this.flightinfo as Array<VtbFlightData>;\n\n    const scheduleTemplates = [];\n    for (const flight of flightinfo) {\n      let departure_date: Dayjs | undefined | null = null;\n      let arrival_date: Dayjs | undefined | null = null;\n\n      if (flight.departure?.date && typeof flight.departure?.date == 'string') {\n        departure_date = dayjs(flight.departure?.date);\n      } else {\n        departure_date = flight.departure?.date;\n      }\n\n      if (flight.arrival?.date && typeof flight.arrival?.date == 'string') {\n        arrival_date = dayjs(flight.arrival?.date);\n      } else {\n        arrival_date = flight.arrival?.date;\n      }\n\n      scheduleTemplates.push(html`\n        <div class=\"flights--flight row\">\n          <div class=\"departure col-lg\">\n            <span class=\"flightdata--key d-lg-none\">Van</span>\n            <span class=\"flightdata--value\">\n              ${this.render_airport(\n                flight.departure?.description,\n                flight.departure?.IATA\n              )}\n            </span>\n          </div>\n          <div class=\"arrival col-lg\">\n            <span class=\"flightdata--key d-lg-none\">Naar</span>\n            <span class=\"flightdata--value\">\n              ${this.render_airport(\n                flight.arrival?.description,\n                flight.arrival?.IATA\n              )}\n            </span>\n          </div>\n          <div class=\"departure--datetime col-lg\">\n            <span class=\"flightdata--key d-lg-none\">Vertrek</span>\n            <span class=\"flightdata--value\"\n              >${unsafeHTML(departure_date?.format(this.dateformat))}</span\n            >\n          </div>\n          <div class=\"arrival--datetime col-lg\">\n            <span class=\"flightdata--key d-lg-none\">Aankomst</span>\n            <span class=\"flightdata--value\"\n              >${unsafeHTML(arrival_date?.format(this.dateformat))}</span\n            >\n          </div>\n          <div class=\"carrier col-lg\">\n            <span class=\"flightdata--key d-lg-none\"\n              >Vluchtnr.<!-- + duur --></span\n            >\n            <span class=\"flightdata--value\">\n              ${this.render_carrier(flight.carrier?.name)}\n              (${this.render_flightnumber(\n                flight.flightnumber,\n                flight.carrier?.code\n              )})\n              ${this.render_operatedby(flight.operated_by)}\n            </span>\n          </div>\n        </div>\n      `);\n    }\n\n    return html`\n      <div class=\"flights--header d-none d-lg-flex row\">\n        <div class=\"departure col\">Van</div>\n        <div class=\"arrival col\">Naar</div>\n        <div class=\"departure--datetime col\">Vertrek</div>\n        <div class=\"arrival--datetime col\">Aankomst</div>\n        <div class=\"carrier col\">Vluchtnr.</div>\n      </div>\n      ${scheduleTemplates}\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'vtb-flightschedule': VtbFlightScheduleElement;\n  }\n}\n"]}