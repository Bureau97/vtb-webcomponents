{"version":3,"file":"map.js","sourceRoot":"","sources":["../../../src/components/map.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, css, html} from 'lit';\nimport {customElement, property, query} from 'lit/decorators.js';\nimport {styleMap, StyleInfo} from 'lit/directives/style-map.js';\n\nimport * as _ from 'lodash';\nconst {isEqual} = _;\n\nimport * as GMaps from '@googlemaps/js-api-loader';\nconst {Loader} = GMaps;\n\nimport {VtbMapMarkerGroup, VtbMapMarker} from '../models.js';\n\nimport {VtbMapMarkerConnectMode} from '../utils/types.js';\n\nexport interface VtbMapOptions {\n  connect_mode?: string;\n  connect_markers: boolean;\n  api_key: string;\n  height?: number;\n  width?: number;\n  zoom?: number;\n}\n\n@customElement('vtb-map-marker')\nexport class VtbMapMarkerElement extends LitElement {\n  @property({type: Number, reflect: true})\n  lat: number = 0.0;\n\n  @property({type: Number, reflect: true})\n  lng: number = 0.0;\n\n  @property({type: String})\n  icon?: string;\n\n  @property({type: String})\n  label?: string;\n\n  static override styles = css`\n    :host {\n      display: none;\n    }\n  `;\n\n  override connectedCallback() {\n    // console.debug('VTB-MAP-MARKER::connectedCallback');\n    super.connectedCallback();\n  }\n}\n\n@customElement('vtb-map-marker-group')\nexport class VtbMapMarkerGroupElement extends LitElement {\n  @property({type: Boolean, attribute: 'connect-markers'})\n  connect_markers: boolean = false;\n\n  get connectMarkers(): boolean {\n    return this.connect_markers;\n  }\n\n  set connectMarkers(value: boolean) {\n    this.connect_markers = value;\n  }\n\n  @property({type: String, attribute: 'connect-mode'})\n  connect_mode?: string = 'flight';\n\n  get connectMode(): string | undefined {\n    return this.connect_mode;\n  }\n\n  set connectMode(value: string) {\n    this.connect_mode = value;\n  }\n\n  @property({\n    type: Array,\n    hasChanged(newVal: Array<VtbMapMarker>, oldVal: Array<VtbMapMarker>) {\n      // console.debug('VtbMapElement::markers::hasChanged');\n      return !isEqual(newVal, oldVal);\n    },\n  })\n  markers: Array<VtbMapMarker>;\n\n  static override styles = css`\n    :host {\n      display: none;\n    }\n  `;\n\n  constructor() {\n    super();\n    this.markers = [];\n  }\n\n  override connectedCallback() {\n    // console.debug('VTB-MAP-MARKER-GROUP::connectedCallback');\n    super.connectedCallback();\n\n    if (this.children.length >= 1) {\n      for (const child of this.children) {\n        const marker = this.parseMarkerElement(child as HTMLElement);\n        if (marker) {\n          this.markers.push(marker);\n        }\n      }\n    }\n\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.addedNodes.length) {\n          // push all nodes to the childElements\n          let _changed = false;\n          for (const node of mutation.addedNodes) {\n            const marker = this.parseMarkerElement(node as HTMLElement);\n\n            if (marker) {\n              this.markers.push(marker);\n              _changed = true;\n            }\n          }\n          // call requestUpdate to re-render the element\n          if (_changed) {\n            this.requestUpdate();\n          }\n        }\n      });\n    });\n\n    observer.observe(this, {\n      childList: true,\n    });\n  }\n\n  public parseMarkerElement(element: HTMLElement): VtbMapMarker | null {\n    const re_marker = /^vtb-map-marker$/i;\n\n    if (re_marker.test(element.tagName)) {\n      const _marker_element = element as VtbMapMarkerElement;\n\n      const marker = new VtbMapMarker();\n      marker.title = element.title || element.innerHTML;\n      marker.lat =\n        parseFloat(_marker_element.getAttribute('lat') as string) || 0.0;\n      marker.lng =\n        parseFloat(_marker_element.getAttribute('lng') as string) || 0.0;\n\n      return marker;\n    }\n\n    return null;\n  }\n}\n\n@customElement('vtb-map')\nexport class VtbMapElement extends LitElement {\n  @property({type: String, attribute: 'api-key'})\n  api_key = '';\n\n  set apiKey(value: string) {\n    this.api_key = value;\n  }\n\n  get apiKey(): string {\n    return this.api_key;\n  }\n\n  @property({\n    type: Array,\n    hasChanged(\n      newVal: Array<VtbMapMarkerGroup>,\n      oldVal: Array<VtbMapMarkerGroup>\n    ) {\n      // console.debug('VtbMapElement::markergroups::hasChanged');\n      return !isEqual(newVal, oldVal);\n    },\n  })\n  markergroups: Array<VtbMapMarkerGroup>;\n\n  @property({type: Number})\n  height?: number = 400;\n\n  @property({type: Number})\n  width?: number = Number.NaN;\n\n  @property({type: Number})\n  zoom?: number = Number.NaN;\n\n  @property({type: Boolean, attribute: 'connect-markers'})\n  connect_markers = false;\n\n  get connectMarkers(): boolean {\n    return this.connect_markers;\n  }\n\n  set connectMarkers(value: boolean) {\n    this.connect_markers = value;\n  }\n\n  @property({type: String, attribute: 'connect-mode'})\n  connect_mode?: string = 'flight';\n\n  get connectMode(): string | undefined {\n    return this.connect_mode;\n  }\n\n  set connectMode(value: string) {\n    this.connect_mode = value;\n  }\n\n  @property({type: Boolean, attribute: 'infowindow-enabled'})\n  use_info_window = false;\n\n  get useInfoWindow(): boolean {\n    return this.use_info_window;\n  }\n\n  set useInfoWindow(value: boolean) {\n    this.use_info_window = value;\n  }\n\n  @property({\n    type: Array,\n    attribute: false,\n    hasChanged(newVal: Array<Node>, oldVal: Array<Node>) {\n      return !isEqual(newVal, oldVal);\n    },\n  })\n  mapstyles?: Array<google.maps.MapTypeStyle> = [];\n\n  @query('div#map')\n  _container?: HTMLElement;\n\n  private _loader?: any; // eslint-disable-line @typescript-eslint/no-explicit-any\n  private _google?: typeof google.maps = undefined;\n  private _directions_service?: google.maps.DirectionsService = undefined;\n  private _directions_renderer?: google.maps.DirectionsRenderer = undefined;\n  private marker_counter: number = 0;\n\n  private _map?: google.maps.Map | null | undefined = null;\n  set map(value: google.maps.Map | null | undefined) {\n    this._map = value;\n  }\n\n  get map(): google.maps.Map | null | undefined {\n    return this._map;\n  }\n\n  private _bounds?: google.maps.LatLngBounds | undefined = undefined;\n  set bounds(value: google.maps.LatLngBounds | undefined) {\n    this._bounds = value;\n  }\n\n  get bounds(): google.maps.LatLngBounds | undefined {\n    return this._bounds;\n  }\n\n  static override styles = css`\n    :host {\n      display: block;\n    }\n\n    button.gm-ui-hover-effect span svg {\n      fill: #000;\n    }\n  `;\n\n  constructor() {\n    // console.debug('VtbMapElement::constructor');\n    super();\n    this.markergroups = [];\n    this.marker_counter = 0; // make sure to reset the counter on each initialization\n  }\n\n  override connectedCallback() {\n    // console.debug('VtbMapElement::connectedCallback');\n    super.connectedCallback();\n\n    if (this.children.length >= 1) {\n      for (const child of this.children) {\n        this.parseChildNode(child);\n      }\n    }\n\n    // setup google maps loader\n    this._loader = new Loader({\n      apiKey: this.apiKey,\n      version: 'weekly',\n    });\n\n    // setup mutation observer for changes to dom\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.addedNodes.length) {\n          // push all nodes to the childElements\n          let _changed: Boolean = false;\n          for (const node of mutation.addedNodes) {\n            const rs = this.parseChildNode(node as Element);\n\n            if (rs && !_changed) {\n              _changed = true;\n            }\n          }\n          // call requestUpdate to re-render the element\n          if (_changed) {\n            // console.debug('requesting an update');\n            this.requestUpdate();\n          }\n        }\n      });\n    });\n\n    observer.observe(this, {\n      childList: true,\n    });\n  }\n\n  private parseChildNode(childNode: Element): boolean {\n    // console.debug('VTB-MAP::parseChildNode', childNode);\n    const re_group = /^vtb-map-marker-group$/i,\n      re_marker = /^vtb-map-marker$/i;\n\n    if (re_group.test(childNode.tagName)) {\n      const group = new VtbMapMarkerGroup();\n      const groupElement = childNode as VtbMapMarkerGroupElement;\n\n      group.connectMode = childNode.getAttribute(\n        'connect-mode'\n      ) as VtbMapMarkerConnectMode;\n      group.connectMarkers = childNode.hasAttribute('connect-markers') || false;\n      group.markers = groupElement.markers;\n\n      this.markergroups.push(group);\n\n      return true;\n    } else if (re_marker.test(childNode.tagName)) {\n      // we got a marker without a group\n      const _marker_element = childNode as VtbMapMarkerElement;\n      const marker = new VtbMapMarkerGroupElement().parseMarkerElement(\n        _marker_element\n      );\n\n      if (this.markergroups.length <= 0) {\n        this.markergroups.push(new VtbMapMarkerGroup());\n        this.markergroups[0].connectMarkers = this.connect_markers;\n        this.markergroups[0].connectMode = this\n          .connect_mode as VtbMapMarkerConnectMode;\n      }\n\n      if (marker) {\n        this.markergroups[0].markers.push(marker);\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  override render() {\n    // console.debug('VTB-MAP::render');\n\n    const containerStyles: StyleInfo = {};\n    if (this.height && this.height > 0) {\n      containerStyles.height = this.height.toString() + 'px';\n    }\n\n    if (this.width && this.width > 0) {\n      containerStyles.width = this.width.toString() + 'px';\n    }\n\n    return html`\n      <div id=\"map\" style=\"${styleMap(containerStyles)}\">\n        Initializing map...\n      </div>\n    `;\n  }\n\n  override firstUpdated() {\n    // console.debug('VTB-MAP::firstUpdated');\n    this._loader\n      ?.load()\n      .then(\n        (\n          google: any // eslint-disable-line @typescript-eslint/no-explicit-any\n        ) => {\n          this._google = google.maps;\n          this._bounds = new google.maps.LatLngBounds();\n          this.initializeMap();\n        }\n      )\n      .catch((err: Error | string) => {\n        console.error(err);\n      });\n  }\n\n  protected initializeMap() {\n    // console.debug('VTB-MAP::initializeMap');\n    const mapoptions = {\n      zoom: 1, // default zoom level, without it stops rendering\n      mapTypeControl: false, // disable map control\n      streetViewControl: false, // disable streetview\n      fullscreenControl: false, // disable fullscreen\n    } as google.maps.MapOptions;\n\n    if (this._container && this._google) {\n      const map = new this._google.Map(this._container, mapoptions);\n      this._map = map;\n    }\n\n    // this._map?.addListener('mapcapabilities_changed', () => {\n    //   // const mapCapabilities = this._map?.getMapCapabilities();\n    //   // console.debug('mapCapabilities: ', mapCapabilities);\n\n    //   // if (!mapCapabilities?.isAdvancedMarkersAvailable) {\n    //   //   // Advanced markers are *not* available, add a fallback.\n    //   //   console.warn('Advanced markers are not available');\n    //   // }\n    // });\n\n    this.setMapStyle();\n    this.addMarkers();\n\n    if (this._bounds) {\n      // console.debug('fitting bounds: ', this._bounds);\n      this._map?.fitBounds(this._bounds);\n      // console.debug('setting center: ', this._bounds.getCenter());\n      this._map?.setCenter(this._bounds.getCenter());\n    }\n  }\n\n  protected setMapStyle() {\n    if (\n      this._google &&\n      this.mapstyles &&\n      this.mapstyles.length >= 1 &&\n      this._map\n    ) {\n      this._map.mapTypes.set(\n        'custom_map_styles',\n        new this._google.StyledMapType(this.mapstyles)\n      );\n      this._map.setMapTypeId('custom_map_styles');\n    }\n  }\n\n  protected addMarkers() {\n    // console.debug('VTB-MAP::addMarkers');\n\n    if (!this._google || !this._map) {\n      // console.debug('not adding markers (yet): ', [this._google, this._map]);\n      return;\n    }\n\n    for (const group of this.markergroups) {\n      // console.debug('adding markers from group: ', group);\n      const tripCoordinates: Array<google.maps.LatLng> = [];\n      const markers = group.markers;\n\n      for (const marker of markers) {\n        this.addMarker(marker);\n        const latlng = new this._google.LatLng(marker.lat, marker.lng);\n        tripCoordinates.push(latlng);\n      }\n\n      const connectModeOptionsByAir = [\n        'fly',\n        'plane',\n        'air',\n        'flight',\n        'airplane',\n      ];\n\n      if (\n        group.connectMarkers &&\n        (!group.connectMode ||\n          connectModeOptionsByAir.includes(group.connectMode))\n      ) {\n        const tripPath = new this._google.Polyline({\n          path: tripCoordinates,\n          geodesic: true,\n          strokeColor: '#FF0000',\n          strokeOpacity: 1.0,\n          strokeWeight: 2,\n        });\n\n        tripPath.setMap(this._map);\n      }\n\n      const connectModeOptionsByRoad = [\n        'drive',\n        'car',\n        'driving',\n        'byroad',\n        'road',\n      ];\n      if (\n        group.connectMarkers &&\n        group.connectMode &&\n        connectModeOptionsByRoad.includes(group.connectMode)\n      ) {\n        this.renderDirections(tripCoordinates, google.maps.TravelMode.DRIVING);\n      }\n    }\n  }\n\n  protected addMarker(marker: VtbMapMarker) {\n    // console.debug('VTB-MAP::addMarker => ', marker);\n    const map: google.maps.Map | null | undefined = this._map;\n\n    const markerOptions: google.maps.MarkerOptions = {};\n    markerOptions.position = new google.maps.LatLng(marker.lat, marker.lng);\n    markerOptions.map = map;\n    markerOptions.label = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'[this.marker_counter];\n\n    const gmarker: google.maps.Marker = new google.maps.Marker(markerOptions);\n    if (marker.title) {\n      // console.debug('create rich marker markup');\n      const infowindow = new google.maps.InfoWindow({\n        content: `<div class=\"vtb-map-marker-title\">${marker.title}</div>`,\n        ariaLabel: marker.title ? marker.title : '',\n      });\n\n      gmarker.addListener('click', () => {\n        // console.debug('click');\n        infowindow.open({\n          anchor: gmarker,\n          map,\n        });\n      });\n    }\n\n    this._bounds?.extend(gmarker.getPosition() as google.maps.LatLng);\n\n    this.marker_counter++;\n  }\n\n  protected renderDirections(\n    tripCoordinates: Array<google.maps.LatLng>,\n    travel_mode: google.maps.TravelMode = google.maps.TravelMode.DRIVING\n  ) {\n    if (!this._google && !this._map) {\n      return;\n    }\n\n    const map: google.maps.Map | null = this._map as google.maps.Map | null;\n\n    if (!this._directions_service) {\n      this._directions_service = new google.maps.DirectionsService();\n    }\n\n    if (!this._directions_renderer) {\n      this._directions_renderer = new google.maps.DirectionsRenderer({\n        suppressMarkers: true,\n      });\n      this._directions_renderer.setMap(map);\n    }\n\n    const origin = tripCoordinates.shift() as\n      | google.maps.LatLng\n      | google.maps.LatLngLiteral\n      | string\n      | google.maps.Place;\n    const destination = tripCoordinates.pop() as\n      | google.maps.LatLng\n      | google.maps.LatLngLiteral\n      | string\n      | google.maps.Place;\n    const directions_request = {} as google.maps.DirectionsRequest;\n    directions_request.origin = origin;\n    directions_request.destination = destination;\n    directions_request.travelMode = travel_mode;\n    directions_request.unitSystem = google.maps.UnitSystem.METRIC;\n\n    if (tripCoordinates.length >= 1) {\n      const waypoints = [] as Array<google.maps.DirectionsWaypoint>;\n\n      tripCoordinates.forEach((elm) => {\n        const wypnt = {\n          location: elm,\n          stopover: true,\n        } as google.maps.DirectionsWaypoint;\n\n        waypoints.push(wypnt);\n      });\n      directions_request.waypoints = waypoints;\n    }\n\n    this._directions_service.route(directions_request, (result, status) => {\n      if (status == 'OK' && result) {\n        this._directions_renderer?.setDirections(result);\n      } else {\n        console.error('Directions request failed due to ' + status);\n      }\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'vtb-map-marker-group': VtbMapMarkerGroupElement;\n    'vtb-map-marker': VtbMapMarkerElement;\n    'vtb-map': VtbMapElement;\n  }\n}\n// test\n"]}