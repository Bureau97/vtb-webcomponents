{"version":3,"file":"models.js","sourceRoot":"","sources":["../../src/models.ts"],"names":[],"mappings":"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","sourcesContent":["import dayjs, {type Dayjs} from 'dayjs';\nimport utc from 'dayjs/plugin/utc.js';\nimport duration from 'dayjs/plugin/duration.js';\n\ndayjs.locale('nl');\ndayjs.extend(utc);\ndayjs.extend(duration);\n\nimport {Dictionary, VtbFilterConfig} from './utils/interfaces.js';\nimport * as interfaces from './utils/interfaces.js';\nimport * as types from './utils/types.js';\n\nexport class VtbParticipant implements interfaces.VtbParticipant {\n  id = 0;\n  title?: string;\n  name?: string;\n  prefix?: string = '';\n  surname?: string;\n  birthdate?: Dayjs;\n  calc_type?: types.VtbParticipantCalcType;\n\n  get age(): number | null {\n    if (!this.birthdate) {\n      return null;\n    }\n\n    return dayjs().diff(this.birthdate, 'year');\n  }\n\n  get fullname(): string {\n    return `${this.name} ${this.prefix ? this.prefix + ' ' : ''}${\n      this.surname\n    }`;\n  }\n}\n\nexport class VtbParticipantPrice implements interfaces.VtbParticipantPrice {\n  participant_id: number = 0;\n  price = 0.0;\n}\n\nexport class VtbParty implements interfaces.VtbParty {\n  id: number | string = '';\n  participants: Array<VtbParticipant> = [];\n}\n\nexport class VtbMedia implements interfaces.VtbMedia {\n  src?: string;\n  tags: Array<string> = [];\n  id?: string;\n}\n\nexport class VtbExtraField implements interfaces.VtbExtraField {\n  name: string = '';\n  title?: string;\n  value?: string;\n  type?: string;\n  group_name?: string;\n  options?: Array<string>;\n\n  get content(): string | null {\n    return this.value ?? null;\n  }\n\n  toString(): string {\n    return this.value ?? '';\n  }\n}\n\nexport class VtbFlight implements interfaces.VtbFlight {\n  date?: Dayjs;\n  IATA?: string;\n  dateformat?: string = 'DD MMM';\n  timezone?: string = 'UTC+01:00';\n  country?: string;\n  city?: string;\n  description?: string;\n  location?: VtbGeoLocation;\n}\n\nexport class VtbFlightCarrier implements interfaces.VtbFlightCarrier {\n  name?: string;\n  code?: string;\n}\n\nexport class VtbFlightData implements interfaces.VtbFlightData {\n  departure?: VtbFlight;\n  arrival?: VtbFlight;\n  carrier?: VtbFlightCarrier;\n  flightnumber?: string;\n  duration?: string;\n  day?: number;\n  operated_by?: string;\n}\n\nexport class VtbElementUnit implements interfaces.VtbElementUnit {\n  title: string = '';\n  participant_prices: Array<VtbParticipantPrice> = [];\n}\n\nexport class VtbElement implements interfaces.VtbElement {\n  id: string = '';\n  object_id?: string;\n  ts_product_id?: number;\n  title: string = '';\n  subtitle?: string;\n  description?: string;\n  additional_description?: string;\n  price = 0.0;\n  price_diff = 0.0;\n  optional = false;\n  nights = 0;\n  hidden = false;\n  day: number = 0;\n  startdate: Dayjs = dayjs();\n  enddate: Dayjs = dayjs();\n  unit_id: number = 0;\n  participant_prices: Array<VtbParticipantPrice> = [];\n  grouptitle?: string;\n  media: Array<VtbMedia> = [];\n  location?: VtbMapMarker;\n  units: Array<VtbElementUnit> = [];\n\n  get participants(): Array<number> {\n    return this.participant_prices.map((participant_price) => {\n      return participant_price.participant_id;\n    });\n  }\n\n  get last_day(): number {\n    return this.day + this.nights;\n  }\n\n  get days(): number {\n    return this.nights + 1;\n  }\n\n  public clone(): VtbElement {\n    const _clone = Object.assign(new VtbElement(), structuredClone(this));\n\n    _clone.startdate = dayjs(this.startdate.format());\n    _clone.enddate = dayjs(this.enddate.format());\n\n    _clone.media = [];\n    for (const _m of this.media) {\n      _clone.media.push(Object.assign(new VtbMedia(), structuredClone(_m)));\n    }\n\n    return _clone;\n  }\n}\n\nexport class VtbElementGroup implements interfaces.VtbElementGroup {\n  id: string = '';\n  title?: string;\n  subtitle?: string;\n  description?: string;\n  nights = 0;\n  hidden = false;\n  day = 0;\n  startdate: Dayjs = dayjs();\n  enddate: Dayjs = dayjs();\n  type_id?: number;\n  unit_id?: number;\n  media: Array<VtbMedia> = [];\n  location?: VtbMapMarker;\n  is_flight = false;\n  is_carrental = false;\n\n  get last_day(): number {\n    return this.day + this.nights;\n  }\n\n  get days(): number {\n    return this.nights + 1;\n  }\n\n  private mapped_elements_by_id: Dictionary<VtbElement> = {};\n  private elements_order: Array<string> = [];\n  private mapped_elements_by_type: Dictionary<Array<string>> = {};\n  private mapped_elements_by_day: Dictionary<Array<string>> = {};\n\n  public add_element(element: VtbElement) {\n    this.mapped_elements_by_id[element.id] = element;\n    this.elements_order.push(element.id);\n\n    if (element.unit_id) {\n      if (!this.mapped_elements_by_type[element.unit_id]) {\n        this.mapped_elements_by_type[element.unit_id] = [];\n      }\n      this.mapped_elements_by_type[element.unit_id].push(element.id);\n    }\n\n    if (element.day) {\n      if (!this.mapped_elements_by_day[element.day]) {\n        this.mapped_elements_by_day[element.day] = [];\n      }\n      this.mapped_elements_by_day[element.day].push(element.id);\n    }\n  }\n\n  get elements(): Array<VtbElement> {\n    const ret: Array<VtbElement> = [];\n    for (const id of this.elements_order) {\n      ret.push(this.mapped_elements_by_id[id]);\n    }\n    return ret;\n  }\n\n  filter_elements(config: VtbFilterConfig): Array<VtbElement> {\n    // const _element_ids = config.element_ids || [];\n    // const element_ids = _element_ids.flat(Infinity);\n\n    const _element_unit_ids = config.element_unit_ids || [];\n    const element_unit_ids = _element_unit_ids.flat(Infinity);\n\n    const _participant_ids = config?.participant_ids || [];\n    const participant_ids = _participant_ids.flat(Infinity);\n\n    let check_element_unit_ids = false;\n    if (element_unit_ids.length >= 1) {\n      check_element_unit_ids = true;\n    }\n\n    let check_participant_ids = false;\n    if (participant_ids.length >= 1) {\n      check_participant_ids = true;\n    }\n\n    let skip_optional = false;\n    if (config?.optional === false) {\n      skip_optional = true;\n    }\n\n    let only_optional = false;\n    if (config?.optional === true) {\n      only_optional = true;\n    }\n\n    if (\n      !check_element_unit_ids &&\n      !check_participant_ids &&\n      !skip_optional &&\n      !only_optional\n    ) {\n      return this.elements;\n    }\n\n    let _elm_ids: Array<string> = [];\n    if (check_element_unit_ids) {\n      for (const unit_id of element_unit_ids) {\n        if (!this.mapped_elements_by_type[Number(unit_id)]) {\n          continue;\n        }\n\n        _elm_ids = _elm_ids.concat(\n          this.mapped_elements_by_type[Number(unit_id)]\n        );\n      }\n    } else {\n      _elm_ids = this.elements_order;\n    }\n\n    const _elements: Array<VtbElement> = [];\n    for (const id of this.elements_order) {\n      if (!_elm_ids.includes(id)) {\n        continue;\n      }\n\n      const _element = this.mapped_elements_by_id[id];\n\n      if (skip_optional && _element.optional) {\n        continue;\n      }\n\n      if (only_optional && !_element.optional) {\n        continue;\n      }\n\n      if (!check_participant_ids) {\n        _elements.push(_element);\n        continue;\n      }\n\n      if (check_participant_ids && _element.participants) {\n        // make a shallow copy so we're not messing with the original price element\n        const _element_copy: VtbElement = _element.clone();\n\n        let participants_unit_price = 0.0;\n        for (const participant_price of _element.participant_prices) {\n          if (participant_ids.includes(participant_price.participant_id)) {\n            participants_unit_price += participant_price.price;\n          }\n        }\n        _element_copy.price = participants_unit_price;\n        _elements.push(_element_copy);\n      }\n    }\n\n    return _elements;\n  }\n\n  public clone(): VtbElementGroup {\n    const _clone = Object.assign(new VtbElementGroup(), structuredClone(this));\n\n    _clone.startdate = dayjs(this.startdate.format());\n    _clone.enddate = dayjs(this.enddate.format());\n\n    _clone.media = [];\n    for (const _m of this.media) {\n      _clone.media.push(Object.assign(new VtbMedia(), structuredClone(_m)));\n    }\n\n    for (const key of Object.keys(this.mapped_elements_by_id)) {\n      _clone.mapped_elements_by_id[key] =\n        this.mapped_elements_by_id[key].clone();\n    }\n\n    return _clone;\n  }\n}\n\nexport class VtbGeoLocation implements interfaces.VtbGeoLocation {\n  lat = 0.0;\n  lng = 0.0;\n}\n\nexport class VtbMapMarker\n  extends VtbGeoLocation\n  implements interfaces.VtbMapMarker\n{\n  label?: string;\n  icon?: string;\n  zoom?: number;\n  title?: string;\n  content?: string;\n}\n\nexport class VtbMapMarkerGroup implements interfaces.VtbMapMarkerGroup {\n  connect_markers: boolean = false;\n  markers: Array<VtbMapMarker> = [];\n  connect_mode?: types.VtbMapMarkerConnectMode = 'flight';\n\n  get connectMode(): string {\n    return <string>this.connect_mode;\n  }\n\n  set connectMode(connect_mode: types.VtbMapMarkerConnectMode) {\n    this.connect_mode = connect_mode;\n  }\n\n  get connectMarkers(): boolean {\n    return this.connect_markers;\n  }\n\n  set connectMarkers(connect_markers: boolean) {\n    this.connect_markers = connect_markers;\n  }\n\n  get _markers(): Array<VtbMapMarker> {\n    return this.markers;\n  }\n}\n\nexport class VtbTravelPlanData implements interfaces.VtbTravelPlanData {\n  title: string = '';\n  subtitle: string = '';\n  covers: Array<VtbMedia> = [];\n  extra_fields: Dictionary<VtbExtraField> = {};\n\n  get extraFields(): Dictionary<VtbExtraField> {\n    return this.extra_fields;\n  }\n\n  start_date?: Dayjs;\n  end_date?: Dayjs;\n  duration: number = 0; // the number of days\n  parties: Dictionary<VtbParty> = {};\n\n  private mapped_participants: Dictionary<VtbParticipant> = {};\n  private participants_order: Array<number> = [];\n\n  public add_participant(participant: VtbParticipant) {\n    this.mapped_participants[participant.id] = participant;\n    this.participants_order.push(participant.id);\n  }\n\n  get participants(): Array<VtbParticipant> {\n    const ret: Array<VtbParticipant> = [];\n    for (const id of this.participants_order) {\n      ret.push(this.mapped_participants[id]);\n    }\n    return ret;\n  }\n\n  sales_price: number = 0;\n\n  flight_elements: Array<VtbFlightData> = [];\n\n  public add_flight_element(flight_element: VtbFlightData) {\n    this.flight_elements.push(flight_element);\n  }\n\n  car_rental_elements: Array<VtbElement> = [];\n\n  public add_carrental_element(carrental_element: VtbElement) {\n    // console.info('carrental: ', carrental_element);\n    this.car_rental_elements.push(carrental_element);\n  }\n\n  // days: Array<VtbElement> = [];\n\n  private mapped_element_groups: Dictionary<VtbElementGroup> = {};\n  private element_groups_order: Array<string> = [];\n  private mapped_element_groups_by_type: Dictionary<Array<string>> = {};\n  private mapped_element_groups_by_day: Dictionary<Array<string>> = {};\n\n  public add_element_group(group: VtbElementGroup) {\n    this.mapped_element_groups[group.id] = group;\n    this.element_groups_order.push(group.id);\n\n    if (group.type_id) {\n      const group_type_id = Number(group.type_id);\n      if (!this.mapped_element_groups_by_type[group_type_id]) {\n        this.mapped_element_groups_by_type[group_type_id] = [];\n      }\n      this.mapped_element_groups_by_type[group_type_id].push(group.id);\n    }\n\n    if (group.day) {\n      if (!this.mapped_element_groups_by_day[group.day]) {\n        this.mapped_element_groups_by_day[group.day] = [];\n      }\n      this.mapped_element_groups_by_day[group.day].push(group.id);\n    }\n  }\n\n  get element_groups(): Array<VtbElementGroup> {\n    const ret: Array<VtbElementGroup> = [];\n    for (const group_id of this.element_groups_order) {\n      ret.push(this.mapped_element_groups[group_id]);\n    }\n    return ret;\n  }\n\n  public filter_element_groups(\n    config: VtbFilterConfig\n  ): Array<VtbElementGroup> {\n    const ret: Array<VtbElementGroup> = [];\n\n    const _group_type_ids = config?.group_type_ids || [];\n\n    // if no group_type_ids are set, then we get and return all groups\n    if (_group_type_ids.length == 0) {\n      return this.element_groups;\n    }\n\n    let _group_ids: Array<string> = [];\n    for (const group_type_id of _group_type_ids) {\n      _group_ids = _group_ids.concat(\n        this.mapped_element_groups_by_type[Number(group_type_id)]\n      );\n    }\n\n    for (const group_id of this.element_groups_order) {\n      if (_group_ids.includes(group_id)) {\n        ret.push(this.mapped_element_groups[group_id]);\n      }\n    }\n\n    return ret;\n  }\n\n  public filter_elements(config: VtbFilterConfig): Array<VtbElement> {\n    let ret: Array<VtbElement> = [];\n\n    const element_groups = this.filter_element_groups(config);\n    for (const group of element_groups) {\n      ret = ret.concat(group.filter_elements(config));\n    }\n\n    return ret;\n  }\n\n  public get_element_groups_by_day(day: number): Array<VtbElementGroup> {\n    // TODO: refactor\n    const _group_ids = this.mapped_element_groups_by_day[day];\n    const ret: Array<VtbElementGroup> = [];\n    for (const group_id of _group_ids) {\n      ret.push(this.mapped_element_groups[group_id]);\n    }\n    return ret;\n  }\n\n  // private mapped_elements: Dictionary<VtbElement> = {};\n\n  // markergroups: Dictionary<Array<VtbMapMarkerGroup>> = [];\n}\n"]}